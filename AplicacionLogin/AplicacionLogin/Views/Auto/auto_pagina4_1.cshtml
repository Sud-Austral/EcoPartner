
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!doctype html>
<html>
<head>
    <title>Prueba de Bootstrap 4</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <LINK rel="StyleSheet" href="~/Content/Site.css" type="text/css">
    <link rel="shortcut icon" href="~/Content/Img/favicon-32x32.png">
</head>

<body>

    <div class="container-fluid">
        <div class="row">
            <div class="col-12 col-sm-12 col-xl-3" style="background-color:transparent;">
                <div class="row">
                    <div class="logo class col-3 col-sm-2 col-lg-2 col-xl-3" style="background-color:transparent;">
                        <img src="/Content/Img/Vector.png" class="img-fluid" alt="Responsive Image">
                    </div>
                    <div class="prueba col-8 col-sm-6 col-lg-8 col-xl-9 text-md-left text-lg-center text-xl-left" style="background-color:transparent; color:#ffff;">
                        <p id="estilo1">
                            <br>
                            <span id="logo"></span>
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-12 col-xl-6" style="background-color:transparent;">
                <div class="row divencabezado" style="padding:2%;">
                    <div class="col-2 " style="background-color:#117394;">
                        <p class="text-center" id="num">1</p>
                    </div>
                    <div class="col-2 " style="background-color:#02AFC1">
                        <p class="text-center" id="num">2</p>
                    </div>
                    <div class="col-2" style="background-color:#04C3D7">
                        <p class="text-center" id="num">3</p>
                    </div>
                    <div class="col-6 " style="background-color:#0BEDBF;">
                        <div class="row">
                            <div class="col-4 col-sm-2 col-xl-2 " style="background-color:transparent;">
                                <p class="num2 text-center" id="num">4</p>
                            </div>
                            <div class="col-8 col-sm-4 col-xl-4" style="background-color:transparent;">
                                <img src="~/Content/Img/Auto.png" class="car2 img-fluid" alt="Responsive Image" />
                            </div>
                            <div class="text-left d-none d-sm-block col-sm-6 col-xl-6" style="background-color:transparent; color:#ffff; padding-top:2%;">
                                <p id="estilo2textoAU4">
                                    <br>
                                    <span id="estilo2cabAU4"></span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-none d-xl-block col-xl-3" style="background-color:transparent; padding-top:2.7%; ">

                <br>
            </div><br />
        </div>
    </div>

    <!-- CUERPO DE LA PÁGINA -->
    <div class="container-fluid" style="background-color: #0BEDBF; margin-top:-2%; ">
        <div class="row">
            <div class="col-12 d-block d-sm-none" style="background-color:transparent;  margin-top:2%; color:#117394">
                <div class="row">
                    <div class="col-12 text-center font-weight-bold" style="background-color:transparent;">
                        <script type="text/javascript">

                            $('#mclp').Click(function () {
                                if ($('#musd').css('display') == none) {
                                    $('#musd').css('display', 'block');
                                }
                                else {
                                    $('#musd').css('display', 'none');
                                }
                            })

                        </script>
                        <script type="text/javascript">
                            function mostrarDiv() {
                                document.getElementById('musd').style.display = "block";
                                document.getElementById('mclp').style.display = "none";
                                //document.getElementById('menos').style.display = "block";
                                document.getElementById('clpm').style.display = "none";
                                document.getElementById('usdm').style.display = "block";

                            }

                            function ocultarDiv() {
                                document.getElementById('mclp').style.display = "block";
                                document.getElementById('musd').style.display = "none";
                                //document.getElementById('menos').style.display = "none";
                                document.getElementById('clpm').style.display = "block";
                                document.getElementById('usdm').style.display = "none";

                            }


                        </script>
                        <script type="text/javascript">
                            function monedaclp() {

                                var valor = (document.convertidor.usd.value) * 1;
                                var tot = valor * 800;
                                tot = tot.toFixed(2);

                                document.convertidor.clp.value = tot;
                                document.convertidor.clptot.value = tot;

                            }

                        </script>
                        <script type="text/javascript">
                            function monedausd() {

                                var valor = (document.convertidor.clp.value) * 1;
                                var tot = valor / 800;
                                tot = tot.toFixed(2);

                                document.convertidor.usd.value = tot;
                                document.convertidor.usdtot.value = tot;

                            }

                        </script>
                        <div id="mclp">
                            <span style="font-weight: bold;">Elige tu moneda</span>
                            <input name="mclp" onclick="monedaclp(); mostrarDiv();" style="margin-left:5px" class="moneda boton-color" type="button" value="CLP">

                        </div>
                        <div id="musd" style="display:none;">
                            <span style="font-weight: bold;">Elige tu moneda</span>
                            <input onclick="monedausd(); ocultarDiv();" style="margin-left:5px; position: relative;" class="moneda boton-color" name="" type="button" value="USD">
                        </div>


                        <form action="/Moto/moto_pagina4_paypal" method="post">
                            <input type="hidden" name="total" value="@ViewBag.total" />
                            <input type="hidden" name="ton" value="@ViewBag.toneladas" />
                        </form>
                    </div>
                </div>
            </div>
            @* producto y elige moneda *@
            <div class="col-4 offset-sm-1 col-sm-5 offset-md-2 col-md-4 col-lg-4  " style="background-color:transparent;  margin-top:2%;">
                <div class="row">
                    <div class="d-none d-sm-block col-6 col-sm-3 text-right font-weight-bold" style="background-color:transparent; color:#117394">
                        <img class="img-fluid" src="~/Content/Img/nube.png" alt="nube">
                    </div>
                    <div class="col-12 col-sm-9 text-left font-weight-bold" style="background-color:transparent; color:#117394">
                        <p style="padding-top:3%;">Producto:</p>
                    </div>
                </div>
            </div>

            <div class="d-none d-sm-block text-center  col-sm-6 text-sm-center col-md-4 col-lg-4 " style="background-color:transparent;  margin-top:2%; color:#117394">
                <div class="row">
                    <div class="col-12 text-center font-weight-bold" style="background-color:transparent;">

                        <script type="text/javascript">
                            function mostrarDiv2() {
                                document.getElementById('musd2').style.display = "block";
                                document.getElementById('mclp2').style.display = "none";
                                //document.getElementById('menos').style.display = "block";
                                document.getElementById('clpm').style.display = "none";
                                document.getElementById('usdm').style.display = "block";
                            }
                            function ocultarDiv2() {
                                document.getElementById('mclp2').style.display = "block";
                                document.getElementById('musd2').style.display = "none";
                                //document.getElementById('menos').style.display = "none";
                                document.getElementById('clpm').style.display = "block";
                                document.getElementById('usdm').style.display = "none";
                            }
                        </script>
                        <script type="text/javascript">
                            function monedaclp() {
                                var valor = (document.convertidor.usd.value) * 1;
                                var tot = valor * 800;
                                tot = tot.toFixed(2);
                                document.convertidor.clp.value = tot;
                                document.convertidor.clptot.value = tot;
                            }
                        </script>
                        <script type="text/javascript">
                            function monedausd() {
                                var valor = (document.convertidor.clp.value) * 1;
                                var tot = valor / 800;
                                tot = tot.toFixed(2);
                                document.convertidor.usd.value = tot;
                                document.convertidor.usdtot.value = tot;
                            }
                        </script>
                        <div id="mclp2">
                            <span style="font-weight: bold;">Elige tu moneda</span>
                            <input name="mclp" onclick=" monedaclp(); mostrarDiv2();" style="margin-left:5px" class="moneda boton-color" type="button" value="CLP">

                        </div>
                        <div id="musd2" style="display:none;">
                            <span style="font-weight: bold;">Elige tu moneda</span>
                            <input onclick="monedausd(); ocultarDiv2();" style="margin-left:5px; position: relative;" class="moneda boton-color" name="" type="button" value="USD">
                        </div>
                        <form action="/Moto/moto_pagina4_paypal" method="post">
                            <input type="hidden" name="total" value="@ViewBag.total" />
                            <input type="hidden" name="ton" value="@ViewBag.toneladas" />
                        </form>
                    </div>
                </div>
            </div>

        </div>
    </div>
    @* Sub total, total *@
    <div class="container-fluid" style="background-color: #0BEDBF; margin-top:-2%; ">
        <div class="row">
            <div class="col-12 offset-sm-1 col-sm-5 offset-md-2 col-md-4 " style="background-color:transparent;  margin-top:2%;">
                <div class="row">
                    <div class=" col-sm-3 text-right font-weight-bold" style="background-color:transparent; color:#117394">
                    </div>
                    <div class="col-12 col-sm-9 text-left" style="background-color:transparent; color:#117394">
                        <span>Carbono x @ViewBag.toneladas T</span>
                    </div>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-md-4" style="background-color:transparent;  margin-top:2%; color:#117394">
                <div class="row">
                    <div class="col-2 d-block d-sm-none  font-weight-bold" style="background-color:transparent;">

                    </div>
                    <div class="col-10 col-sm-12 text-center font-weight-bold" style="background-color:transparent;">
                        <form name="convertidor">
                            <div id="clpm">

                                <div><span style="font-weight: bold; ">Subtotal</span><span>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$ <input id="" type="text" class="inputmoneda" disabled="disabled" name="usd" value="@ViewBag.total" /> USD</span></div>
                                <div><span>&nbsp&nbsp</span></div>
                                <div><span style="font-weight: bold; ">Total</span><span style="font-weight: bold">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$<input id="" type="text" class="inputmoneda" disabled="disabled" name="usdtot" value="@ViewBag.total" />  USD</span></div>
                                <div><span>&nbsp&nbsp</span></div>
                                <div><span>&nbsp&nbsp</span></div>
                            </div>
                            <div id="usdm" style="display:none">
                                <div><span style="font-weight: bold; ">Subtotal</span><span>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$ <input id="" type="text" class="inputmoneda" disabled="disabled" name="clp" /> CLP</span></div>
                                <div><span>&nbsp&nbsp</span></div>
                                <div><span style="font-weight: bold; ">Total</span><span style="font-weight: bold">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$ <input type="text" class="inputmoneda" disabled="disabled" name="clptot" />  CLP</span></div>
                                <div><span>&nbsp&nbsp</span></div>
                                <div><span>&nbsp&nbsp</span></div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

        </div>
    </div>

    @*TEXTO ELIGE TU MÉTODO DE PAGO, BÓTONES PAYPAL Y WEB PAY  *@
<div class="container-fluid">
    <div class="row" style="margin-top:-2px; background-color:#0BEDBF">
        <div class="col-5 offset-md-1 col-sm-5 col-xl-5" style="background-color:transparent;">
            <a href="javascript: history.go(-1)"><input class="calcular3 boton-color" name="" type="button" value="<-- Atrás"></a>
        </div>
        <div class="col-7 text-center col-sm-4 col-xl-4" style="background-color:transparent; color:#117394">
            <p style="font-weight: bold; text-align:center;">Elige tu método de pago</p>
        </div>
    </div>
    <div class="row" style="margin-top:-2px; background-color:#0BEDBF">
        <div id="smart-button-container" class="col-12 text-right" style="background-color:transparent; ">
            <div class="row">
                <div class="col-12 offset-sm-4 col-sm-4 offset-md-5 col-md-3 text-right">
                    <div class="d-none" style="text-align: center"><label for="description"> </label><input hidden type="text" name="descriptionInput" id="description" maxlength="127" value="@ViewBag.toneladas"></div>
                    <p class="d-none" id="descriptionError" style="visibility: hidden; color:red; text-align: center;">Please enter a description</p>
                    <div class="d-none" style="text-align: center"><label for="amount"> </label><input hidden name="amountInput" type="number" id="amount" value="@ViewBag.total"></div>
                    <p class="d-none" id="priceLabelError" style="visibility: hidden; color:red; text-align: center;">Please enter a price</p>
                    <div class="d-none" id="invoiceidDiv" style="text-align: center; display: none;"><label for="invoiceid"> </label><input name="invoiceid" maxlength="127" type="text" id="invoiceid" value=""></div>
                    <p class="d-none" id="invoiceidError" style=" visibility: hidden; color: red; text-align: center;">Please enter an Invoice ID</p>
                    <div style="text-align: center; margin-top: 1.625rem;" id="paypal-button-container"></div>

                </div>
                <div class="col-12  col-sm-4 col-md-3" text-align:center;">

                    <form action="@ViewBag.form" method="post">
                        <input hidden type="text" name="token_ws" value="@ViewBag.token" />
                        <input hidden type="text" name="toneladas" value="@ViewBag.toneladas" /><br />
                        <input class="img-fluid" type="image" src="~/Content/Img/webpay.svg" height="150" width="300" />
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


</body>
</html>

@*
    <script src="https://www.paypal.com/sdk/js?client-id=ARkGHnn3-mtjesDGtCGY5NGv6f6fsIiLfMaw6P2OTRDPNnjNdTmBpj5YKAWP36SAkeCKiNfpVlSi2U--&currency=USD" data-sdk-integration-source="button-factory"></script>
*@
<script src="https://www.paypal.com/sdk/js?client-id=AUtWDW27C_dQFZbr3GjPakxfvvS-GUBFJywU95gNqqX-OaC80-vay1DCz6lBXJc-cUez-2AkjUC1znzf&currency=USD" data-sdk-integration-source="button-factory"></script>
<script>
    function initPayPalButton() {
        var description = document.querySelector('#smart-button-container #description');
        var amount = document.querySelector('#smart-button-container #amount');
        var descriptionError = document.querySelector('#smart-button-container #descriptionError');
        var priceError = document.querySelector('#smart-button-container #priceLabelError');
        var invoiceid = document.querySelector('#smart-button-container #invoiceid');
        var invoiceidError = document.querySelector('#smart-button-container #invoiceidError');
        var invoiceidDiv = document.querySelector('#smart-button-container #invoiceidDiv');

        var elArr = [description, amount];

        if (invoiceidDiv.firstChild.innerHTML.length > 1) {
            invoiceidDiv.style.display = "block";
        }

        var purchase_units = [];
        purchase_units[0] = {};
        purchase_units[0].amount = {};

        function validate(event) {
            //alert(event.value.length >= 0);
            return event.value.length >= 0;
        }

        paypal.Buttons({
            style: {
                color: 'gold',
                shape: 'rect',
                label: 'paypal',
                layout: 'vertical',

            },

            onInit: function (data, actions) {
                //actions.disable();
                actions.enable();

                if (invoiceidDiv.style.display === "block") {
                    elArr.push(invoiceid);
                }

                elArr.forEach(function (item) {
                    item.addEventListener('keyup', function (event) {
                        var result = elArr.every(validate);
                        if (result) {
                            actions.enable();
                        } else {
                            actions.disable();
                        }
                    });
                });
            },

            onClick: function () {
                if (description.value.length < 1) {
                    descriptionError.style.visibility = "visible";
                } else {
                    descriptionError.style.visibility = "hidden";
                }

                if (amount.value.length < 1) {
                    priceError.style.visibility = "visible";
                } else {
                    priceError.style.visibility = "hidden";
                }

                if (invoiceid.value.length < 1 && invoiceidDiv.style.display === "block") {
                    invoiceidError.style.visibility = "visible";
                } else {
                    invoiceidError.style.visibility = "hidden";
                }

                purchase_units[0].description = description.value;
                purchase_units[0].amount.value = amount.value;

                if (invoiceid.value !== '') {
                    purchase_units[0].invoice_id = invoiceid.value;
                }
            },

            createOrder: function (data, actions) {
                return actions.order.create({
                    purchase_units: purchase_units,
                });
            },

            onApprove: function (data, actions) {
                return actions.order.capture().then(function (details) {
                    alert('Transaction completed by ' + details.payer.name.given_name + '!');
                });
            },

            onError: function (err) {
                console.log(err);
            }
        }).render('#paypal-button-container');
    }
    initPayPalButton();
</script>




<script>
    window.localStorage.clear();
    
    window.localStorage.setItem("nombre",'@ViewBag.nombre')
    window.localStorage.setItem("toneladas", '@ViewBag.toneladas')
    window.localStorage.setItem("telefono", '@ViewBag.telefono')
    window.localStorage.setItem("empresa", '@ViewBag.empresa')
    window.localStorage.setItem("pais", '@ViewBag.pais')
    window.localStorage.setItem("email", '@ViewBag.email')
    window.localStorage.setItem("total", '@ViewBag.total')
    window.localStorage.setItem("id",'@ViewBag.id')
    window.localStorage.setItem("token","@ViewBag.token")
        
</script>